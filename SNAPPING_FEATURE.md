# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–≤—è–∑–∫–∏ (Snapping) –¥–ª—è Lindi Sticker Widget

## üéØ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ –∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–º –ª–∏–Ω–∏—è–º** (–∫–∞–∫ –≤ Photoshop/Figma).

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ú–∞–≥–Ω–∏—Ç–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞** - –∫–æ–≥–¥–∞ —Å—Ç–∏–∫–µ—Ä –ø–æ–¥—Ö–æ–¥–∏—Ç –±–ª–∏–∑–∫–æ –∫ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20px), –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è
2. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ** - —Å–∏–Ω–∏–µ –ª–∏–Ω–∏–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ —Å–Ω–∞–ø–∏–Ω–≥–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –æ—Å—è–º** - –ø—Ä–∏–≤—è–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
4. **–ü–ª–∞–≤–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ** - –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∏—Å—á–µ–∑–∞—é—Ç —á–µ—Ä–µ–∑ 100ms –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
5. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### LindiController

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```dart
LindiController(
  icons: [...],
  enableSnapping: true,        // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Å–Ω–∞–ø–∏–Ω–≥
  snapThreshold: 20,           // –ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
)
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `bool enableSnapping` - –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`)
- `double snapThreshold` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö –¥–ª—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–≤—è–∑–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `20`)
- `ValueNotifier<bool> verticalGuidelineVisible` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏
- `ValueNotifier<bool> horizontalGuidelineVisible` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏

### LindiStickerWidget

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ –ª–∏–Ω–∏–∏:
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è –ø–æ —Ü–µ–Ω—Ç—Ä—É (—Å–∏–Ω—è—è, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è)
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è –ø–æ —Ü–µ–Ω—Ç—Ä—É (—Å–∏–Ω—è—è, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è/–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `ValueListenableBuilder`

### LindiGestureDetector

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–Ω–∞–ø–∏–Ω–≥–∞:
- –ú–µ—Ç–æ–¥ `_checkSnapAlignment()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–Ω—Ç—Ä–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é
- –¢–∞–π–º–µ—Ä –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —á–µ—Ä–µ–∑ 100ms
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–Ω–∞–ø–∏–Ω–≥–∞ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (`onDragUpdate`)
- –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ –∂–µ—Å—Ç–∞

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Å–Ω–∞–ø–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```dart
final controller = LindiController(
  icons: [
    LindiStickerIcon(
      icon: Icons.delete,
      alignment: Alignment.topLeft,
      onTap: () => controller.selectedWidget?.delete(),
    ),
    // ... –¥—Ä—É–≥–∏–µ –∏–∫–æ–Ω–∫–∏
  ],
);

LindiStickerWidget(
  controller: controller,
  child: YourMainWidget(),
)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–Ω–∞–ø–∏–Ω–≥–∞

```dart
final controller = LindiController(
  icons: [...],
  enableSnapping: true,      // –í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É
  snapThreshold: 30,         // –£–≤–µ–ª–∏—á–∏—Ç—å –∑–æ–Ω—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –¥–æ 30px
);
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–Ω–∞–ø–∏–Ω–≥–∞

```dart
final controller = LindiController(
  icons: [...],
  enableSnapping: false,     // –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É
);
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–º–∏

```dart
// –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –Ω–∞–ø—Ä–∞–≤–ª—è—é—â—É—é
controller.verticalGuidelineVisible.value = true;

// –°–∫—Ä—ã—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –Ω–∞–ø—Ä–∞–≤–ª—è—é—â—É—é
controller.horizontalGuidelineVisible.value = false;
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∏–∫–µ—Ä–∞** (`onDragUpdate`):
   - –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä —Å—Ç–∏–∫–µ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ü–µ–Ω—Ç—Ä–∞–º–∏ –ø–æ X –∏ Y

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏**:
   - –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ X < `snapThreshold` ‚Üí –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
   - –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ Y < `snapThreshold` ‚Üí –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
   
3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏**:
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è delta –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ

4. **–ü—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è** (`onDragEnd`):
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –Ω–∞ 100ms
   - –ù–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                 ‚îÇ
‚îÇ         Parent Container        ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ              ‚îä ‚Üê Vertical       ‚îÇ
‚îÇ              ‚îä   guideline      ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ         ‚îÇ Sticker ‚îÇ             ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ              ‚îä                  ‚îÇ
‚îÇ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÇ ‚Üê Horizontal guideline
‚îÇ                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

- **–¶–≤–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏—Ö**: `Colors.blue.withOpacity(0.7)`
- **–¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–π**: `1px`
- **–í—Ä–µ–º—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è**: `100ms`
- **–ü–æ—Ä–æ–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `20px`

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ü—Ä–∏–≤—è–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫ **—Ü–µ–Ω—Ç—Ä—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** (–Ω–µ –∫ –∫—Ä–∞—è–º –¥—Ä—É–≥–∏—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤)
2. –ù–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏
3. –°–Ω–∞–ø–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏/–≤—Ä–∞—â–µ–Ω–∏–∏

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –∫ –∫—Ä–∞—è–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –∫ –¥—Ä—É–≥–∏–º —Å—Ç–∏–∫–µ—Ä–∞–º
- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ü–≤–µ—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏—Ö
- [ ] –ó–≤—É–∫–æ–≤–∞—è/—Ç–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ —Å–Ω–∞–ø–∏–Ω–≥–µ
- [ ] –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ (grid snapping)
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏
